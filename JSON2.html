<!DOCTYPE html>
<html>
   <head>
    <meta charset="utf-8">
	<title>PARDUOTUVĖ</title>
	<link rel="stylesheet" type="text/css" >
<!-- jsCalendar v1.4.3 Javascript and CSS -->
<script src="https://unpkg.com/simple-jscalendar@1.4.3/source/jsCalendar.min.js" 
integrity="sha384-JqNLUzAxpw7zEu6rKS/TNPZ5ayCWPUY601zaig7cUEVfL+pBoLcDiIEkWHjl07Ot" crossorigin="anonymous"></script>
<link rel="stylesheet" href="https://unpkg.com/simple-jscalendar@1.4.3/source/jsCalendar.min.css" 
integrity="sha384-+OB2CadpqXIt7AheMhNaVI99xKH8j8b+bHC8P5m2tkpFopGBklD3IRvYjPekeWIJ" crossorigin="anonymous">
<link href="https://fonts.googleapis.com/css?family=Roboto" rel="stylesheet">
</head>
<style>
 * {
 box-sizing: border-box;
         }
body {
margin: 0;
font-family: 'Roboto', sans-serif;
background-color: LightSteelBlue;

}
.container-outer{
}

.jsCalendar.material-theme.green thead{
background-color: CadetBlue;
background-color:DimGrey;
}

.jsCalendar.green tbody td.jsCalendar-current {
background-color: Steelblue;
}

td: active{
 background-color: yellow;
}


.nameButton, .cancelButton {
color: Snow;
background-color: DimGrey;
border: 2px solid black;
letter-spacing: 1px;
height: 100%;
	font-weight: 600;
}

input{
 padding: 7px;
 margin: 7px;s
 height: 30px;
}

form{
text-align: center;

}
.pic {
  display: block;

  width: 100%;
}

.tab {
  display: grid;
  grid-template-columns: repeat( auto-fit, minmax(250px, 1fr));

}

.tab button {
  background-color:#85144b;
  border: 3px solid black;
  cursor: pointer;
  padding: 14px 16px;
  transition: 0.3s;
  color: white;
  font-size: 1.5rem;
}

.tab button:hover {
  background-color: #FFDC00;
}
.tab button.active {
  background-color: #FFDC00;
}

#clientPage, #salonPage{
padding-bottom: 50px;
}

.tabcontent {
  display: none;
  padding: 0;
  margin: 0;
  border: 1px solid #ccc;
  border-top: none;
}

.container{
display: grid;
grid-template-columns: 1fr 1fr;
place-items:center;
background-color: LightSteelBlue;
margin: 20px;
}

h1{
text-align: center;
background-color: BlanchedAlmond;
padding: 20px 0px;
margin: 0;
margin-bottom: 0;
font-size: 2rem;
	}
	
	h3, p{
	text-align: center;
	}
	
	.header-small{
	text-align: center;
background-color: BlanchedAlmond;
margin: 0;
padding-bottom: 20px;
	}


tbody{
margin: 10px;
}

tr{
height: 25px;
padding: 15px;
}

.dinamicTable td, .dinamicTable2 td{
padding: 15px;
margin: 10px;

}


.dinamicTable, .dinamicTable2{
height: 300px;
width: 600px;
background-color: orange;
display: grid;
grid-template-columns: 1fr;
background-image: url("salon.jpg");


}

.dinamicTable table, .dinamicTable2 table {
background-color: LightSteelBlue;
display: grid;
place-items: center;
grid-template-columns: 1fr;
}



.hide{
display: none;
}



.red{
background-color: red;
color: red;
pointer-events: none;
}

.redText{
color: red;
}

.green td {
color: green;
cursor: pointer;
}

.visible{
display: block;
}
</style>
 <body>


<div class="tab">
   <button class="tablinks" onclick="showPage(event, 'clientPage')">Klientams</button>
   
   <img class="pic" src="pink.jpg" alt="pink chairs" height= "600px">
   <button class="tablinks" onclick="showPage(event, 'salonPage')">Darbuotojams</button>
</div>
 
<div class="container-outer">
 
 <div id="clientPage" class="tabcontent">
 <div>
 <h1> SVEIKI ATVYKĘ Į MŪSŲ KIRPYKLĄ</h1>
 <h3 class="header-small"> Čia galite rezervuoti apsilankymo laiką. </h3>
 </div>
 
  <div class="container">
  <section>
    <h3> Peržiūrėkite laisvus laikus kalendoriuje. </h3>
    <div class="auto-jsCalendar material-theme green" data-month-format="##/YYYY" 
     data-max="28/02/2019">
     </div>
  </section>
  
  
  <form class="register">
     <h3> Pasirinkite laisvą laiką ir įrašykite savo vardą </h3> 

	 <input class="firstName" type="text"   placeholder="jūsų vardas .." name="firstName" required>
	 <input class = "nameButton" type="button" value="Registruotis" onclick="" name="submit" >
     <div class="dinamicTable"> 
     </div>
   </form>
   
</div>
</div>

 

<div id="salonPage" class="tabcontent">
 <h1> REGISTRACIJOS</h1>
 <div class="container"> 
 <section>
 <p> Pasirinkite datą </p>
  <div class="auto-jsCalendar material-theme green" data-month-format="##/YYYY" 
     data-max="28/02/2019">
 </div> 
 </section>
 <form class="register">
   <input class="firstName" type="text"   placeholder="įrašykite vardą" name="firstName" required>
    <input class = "nameButton" type="button" value="Registruoti" onclick="" name="submit" >
   <input class = "cancelButton" type="button" value="Atšaukti rezervaciją" onclick="" name="submit" >
   <div class="dinamicTable2"> 
   </div>
 </form> 

</div>  
</div>

</div>
</body>
<script>

var reservations = {
  19 : [         
             {
                "Time": "10:00",
                "Name":  "none"     
            },
            {
               "Time": "10:15",
                "Name":  "none"  
            },
            {
               "Time": "10:30",
                "Name":  "none"  
            },
			 {
                "Time": "10:45",
                "Name":  "none",
            }
			<!-- { -->
                <!-- "Time": "11:00", -->
                <!-- "Name":  "none"       -->
            <!-- }, -->
            <!-- { -->
               <!-- "Time": "11:15", -->
                <!-- "Name":  "none"   -->
            <!-- }, -->
            <!-- { -->
               <!-- "Time": "11:30", -->
                <!-- "Name":  "none"  -->
            <!-- }, -->
			 <!-- { -->
                <!-- "Time": "11:45", -->
                <!-- "Name":  "none"   -->
            <!-- }, -->
			 <!-- { -->
                <!-- "Time": "12:00", -->
                <!-- "Name":  "none"       -->
            <!-- }, -->
            <!-- { -->
               <!-- "Time": "12:15", -->
                <!-- "Name":  "none"   -->
            <!-- }, -->
            <!-- { -->
               <!-- "Time": "12:30", -->
                <!-- "Name":  "none"   -->
            <!-- }, -->
			 <!-- { -->
                <!-- "Time": "12:45", -->
                <!-- "Name":  "none"   -->
            <!-- }, -->
			<!-- { -->
                <!-- "Time": "13:00", -->
                <!-- "Name":  "none"       -->
            <!-- }, -->
            <!-- { -->
               <!-- "Time": "13:15", -->
                <!-- "Name":  "none"   -->
            <!-- }, -->
            <!-- { -->
               <!-- "Time": "13:30", -->
                <!-- "Name":  "none"   -->
            <!-- }, -->
			 <!-- { -->
                <!-- "Time": "13:45", -->
                <!-- "Name":  "none"  -->
            <!-- }, -->
			  <!-- { -->
               <!-- "Time": "14:00", -->
                <!-- "Name":  "none" -->
            <!-- }, -->
			 <!-- { -->
                <!-- "Time": "14:15", -->
                <!-- "Name":  "none" -->
            <!-- }, -->
			<!-- { -->
                <!-- "Time": "14:30", -->
                <!-- "Name":  "none" -->
            <!-- }, -->
            <!-- { -->
               <!-- "Time": "14:45", -->
                <!-- "Name":  "none" -->
            <!-- }, -->
            <!-- { -->
               <!-- "Time": "15:00", -->
                <!-- "Name":  "none" -->
  
            <!-- }, -->
			 <!-- { -->
                <!-- "Time": "15:15", -->
                <!-- "Name":  "none" -->
            <!-- }, -->
			<!-- { -->
                <!-- "Time": "15:30", -->
                <!-- "Name":  "none"     -->
            <!-- }, -->
            <!-- { -->
               <!-- "Time": "15:45", -->
                <!-- "Name":  "none" -->
            <!-- }, -->
            <!-- { -->
               <!-- "Time": "16:00", -->
                <!-- "Name":  "none"  -->
            <!-- }, -->
			 <!-- { -->
                <!-- "Time": "16:15", -->
                <!-- "Name":  "none" -->
            <!-- }, -->
			 <!-- { -->
                <!-- "Time": "16:30", -->
                <!-- "Name":  "none" -->
  
            <!-- }, -->
			<!-- { -->
                <!-- "Time": "16:45", -->
                <!-- "Name":  "none"     -->
            <!-- }, -->
            <!-- { -->
               <!-- "Time": "17:00", -->
                <!-- "Name":  "none"  -->
            <!-- }, -->
            <!-- { -->
               <!-- "Time": "17:15", -->
                <!-- "Name":  "none" -->
            <!-- }, -->
			 <!-- { -->
                <!-- "Time": "17:30", -->
                <!-- "Name":  "none" -->
  
            <!-- }, -->
			<!-- { -->
                <!-- "Time": "17:45", -->
                <!-- "Name":  "Bronė"       -->
            <!-- }, -->
            <!-- { -->
               <!-- "Time": "18:00", -->
                <!-- "Name":  "none"   -->
            <!-- }, -->
            <!-- { -->
               <!-- "Time": "18:15", -->
                <!-- "Name":  "none"  -->
            <!-- }, -->
			 <!-- { -->
                <!-- "Time": "18:30", -->
                <!-- "Name":  "none"   -->
            <!-- }, -->
			<!-- { -->
                <!-- "Time": "18:45", -->
                <!-- "Name":  "Kotryna"      -->
            <!-- }, -->
            <!-- { -->
               <!-- "Time": "19:00", -->
                <!-- "Name":  "none",   -->
            <!-- }, -->
            <!-- { -->
               <!-- "Time": "19:15", -->
                <!-- "Name":  "Ugnė" -->
            <!-- }, -->
			 <!-- { -->
                <!-- "Time": "19:30", -->
                <!-- "Name":  "none" -->
            <!-- }, -->
			 <!-- { -->
                <!-- "Time": "19:45", -->
                <!-- "Name":  "none"  -->
            <!-- } -->
			<!-- ] -->
			]
			}




			
			
			//////////////////////////////////////###########################################################################
//hideSelected();
 
 
 //MARK RESERVED TIMES
		 function hideSelected(){
			var names = Object.values(reservations);	
			for(var i = 0; i<names.length; i++){ 
			for(var y = 0; y<names[i].length; y++){
			if(names[i][y]["Name"] !== "none"){
			names[i][y]["Name"] = "Užimta";
			
			 }}}
			 };
			 
			 //RESERVED TIMES - RED
			function hideSelected2(){
			 var allRows = document.querySelector(".dinamicTable").querySelectorAll("tr");
			 //var allTableData = document.querySelector(".dinamicTable").querySelectorAll("td");
			 //console.log(Array.from(allRows));
			 for (var i = 0; i<allRows.length; i++) {
			 if(allRows[i].innerText.includes("Užimta")){	
		     allRows[i].classList.add("red")}
			}	
			}
			
		
		// add red color to calendar's day which is fully reserved
		 function makeDayRed(event){
		 var allRows = Array.from(document.querySelector(".dinamicTable").querySelectorAll("tr"));
		   //console.log(allRows);
		   var array = [];
		   var length = allRows.length -1;
		   
		   // collect appointments
		   for(var i = 1; i<allRows.length; i++){
		    if(allRows[i].innerText.includes("Užimta")){
			array.push(allRows[i])};
			if(array.length == length){
			//make day red if it is full of appointment
			event.target.classList.add("red");
			}
			}}
		 
  
		

//CALENDAR**************************************************
document.querySelector('.green').addEventListener("click", function(event) {
  var td = event.target.innerHTML;
  //var form = document.querySelectorAll("form");
  //form[0].classList.add("visible");
 //REIK TOGGLE FUNKCIJOS cia
  var nameButton = document.querySelector(".nameButton");

				     //get current day and ban from selecting previous days
				     <!-- var date = new Date(); -->
					 <!-- var currentDay = date.getDate(); -->
				     <!-- if(td<currentDay){return} -->
					 //if clicked on DAY, start building table 
					  if (event.target.tagName.toLowerCase() === 'td') {
					  //console.log(event.target.innerHTML);
					  collectHeaders(td);
					  } 		  
  
  //jei visi hidden td padaryt raudona
//select tdata of calender

  ///ADD RESERVATION
nameButton.onclick = function (){
var radioId;
var firstName = document.querySelector(".firstName").value;
var radios = document.querySelectorAll("input");
for(var i = 0; i<radios.length; i++){ 
if (radios[i].checked) {
 radio = radios[i];
 radioId = radios[i].id; 
 };
 if (firstName == "" || firstName== " "){
alert ("registruojantis būtina pasirinkti laiką ir įvesti kontaktinius duomenis");
return}
 }
 //td - day, radioID (checked radio id) - dienos objekto indeksas(valanda)
reservations[td][radioId].Name = firstName;
document.querySelector(".firstName").value = " ";
removeRow(td, radioId);
countReservations(td);
//alert("Jūsų registracija sėkminga")
//jei tik ivedi varda bei radio pazymejimo tuomet nepranesa kad nepazymejai

}
 makeDayRed(event);
 hideSelected();
});




function countReservations(td){
//reservations[16].length
console.log(td);
}
//MAKE ROWS RED IF "NONE" has appointment*****
function removeRow(td, radioId){
var allRows = document.querySelectorAll('tr');
for (var i = 0; i< allRows.length; i++){
if (reservations[td][radioId].Name !== "none"){
  if(allRows[i].id == radioId){ allRows[i].classList.add("hide")}}}
  
  console.log(reservations)}
///*******************************************************************



//CREATE TABLE OF APPOINTMENTS
function collectHeaders(td){
  var col = [];
        for (var i = 0; i < reservations[td].length; i++) {
            for (var key in reservations[td][i]) {
                if (col.indexOf(key) === -1) {
                    col.push(key);
                }
            }
			createHeaders(td, col)
        }}
		

		function createHeaders(td, col){	  
        var table = document.createElement("table");
		//insert ONE row for headers inside table --->
        var tr = table.insertRow(-1);
		// kiekvienam pavadinimui sukurk langeli lenteleje
        for (var i = 0; i < col.length; i++) {
		//create table header langelį
            var th = document.createElement("th");      
	    // duok pavadinima table header is col array
            th.innerHTML = col[i];
			//idek th i ROW
            tr.appendChild(th);
          }
		 addData(td, col, table)
}		

function addData(td, col, table){
var idCounter = 0;
        // ADD JSON DATA TO THE TABLE AS ROWS. INSERT  ROWS I APACIA
        for (var i = 0; i < reservations[td].length; i++) {
            tr = table.insertRow(-1);
	
            var input = document.createElement("input");
            input.setAttribute("type", "radio");
            input.setAttribute("id", idCounter);
			input.setAttribute("name", "firstname");
            //input.setAttribute("required", "");	
            //input.setAttribute("value", idCounter);			
            tr.setAttribute('id', idCounter);
			
			idCounter += 1;
			/// langeliai HORIZONTALIAI pridedami
            for (var j = 0; j < col.length; j++) {
			
                var tabCell = tr.insertCell(-1);
                tabCell.innerHTML = reservations[td][i][col[j]];	
			    tr.appendChild(input);
				
            }
        }	
        // add table to HTML div
		var dinamicTable = document.querySelector(".dinamicTable");
		dinamicTable.innerHTML = "";
        dinamicTable.appendChild(table);

		
		//sukuriam table,  o tada paslepiam rezervuotus laikus
		
        //hideSelected2()		
		}
	


//*************************AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA



document.querySelectorAll('.green')[1].addEventListener('click', function(event) { 

				  var td = event.target.innerHTML;
				  var nameButton = document.querySelectorAll(".nameButton")[1];
				  var cancelButton = document.querySelector(".cancelButton");
  
  
  if (event.target.tagName.toLowerCase() === 'td') {
  collectHeaders2(td);
  } 
  
nameButton.onclick = function (){
var radioId;
var firstName = document.querySelectorAll(".firstName")[1].value;
//console.log(firstName);
var radios = document.querySelectorAll("input");
for(var i = 0; i<radios.length; i++){ 
if (radios[i].checked) {
 radio = radios[i];
 radioId = radios[i].id; 
 };
 if (firstName == "" || firstName== " "){
alert ("registruojantis būtina pasirinkti laiką ir įvesti kontaktinius duomenis");
return}
 }
 //td - day, radioID (checked radio id) - dienos objekto indeksas(valanda)
reservations[td][radioId].Name = firstName;
document.querySelectorAll(".firstName")[1].value = " ";
//removeRow(td, radioId);
countReservations(td);
//alert("Jūsų registracija sėkminga")
//jei tik ivedi varda bei radio pazymejimo tuomet nepranesa kad nepazymejai
}
 makeDayRed(event);
 
 
cancelButton.onclick = function (){
 var radios = document.querySelectorAll("input");
 for(var i = 0; i<radios.length; i++){ 
 if (radios[i].checked) {
 var radio = radios[i];
 var radioId = radios[i].id; 
 }};
 //cancel reservation,. but neatnaujina cia pat, tik JSON faile
 reservations[td][radioId].Name = "none";
 removeRow2(td, radioId);
 
};
});


function removeRow2(td, radioId){
var allRows = document.querySelectorAll('tr');
for (var i = 0; i< allRows.length; i++){
if (reservations[td][radioId].Name == "none"){
  if(allRows[i].id == radioId){ allRows[i].classList.add("hide")}}}
  }


function sortData(){

}
  
  
  
  


  
  
  
function collectHeaders2(td){
console.log(td);
console.log(reservations);
  var col = [];
        for (var i = 0; i < reservations[td].length; i++) {
            for (var key in reservations[td][i]) {
                if (col.indexOf(key) === -1) {
                    col.push(key);
                }
            }
			createHeaders2(td, col)
        }}
		
		function createHeaders2(td, col){	  
        var table = document.createElement("table");		
        var tr = table.insertRow(-1);		
        for (var i = 0; i < col.length; i++) {
            var th = document.createElement("th");      
            th.innerHTML = col[i];
            tr.appendChild(th);
          }
		 addData2(td, col, table)
}		

function addData2(td, col, table){
var idCounter = 0;
        for (var i = 0; i < reservations[td].length; i++) {
            tr = table.insertRow(-1);
            var input = document.createElement("input");
            input.setAttribute("type", "radio");
            input.setAttribute("id", idCounter);
			input.setAttribute("name", "firstname");			
            tr.setAttribute('id', idCounter);			
			idCounter += 1;
            for (var j = 0; j < col.length; j++) {
                var tabCell = tr.insertCell(-1);
                tabCell.innerHTML = reservations[td][i][col[j]];	
			    tr.appendChild(input);
            }
        }	
		var dinamicTable2 = document.querySelector(".dinamicTable2");
		dinamicTable2.innerHTML = "";
        dinamicTable2.appendChild(table);		
		}
		
		
	
	
	
	
	
	
	
	
	
	
	
	
	
///**************ŪAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
	
  function showPage(event, page) {
  var i, tabcontent, tablinks;

  // Get all elements with class="tabcontent" and hide them
  tabcontent = document.getElementsByClassName("tabcontent");
  for (i = 0; i < tabcontent.length; i++) {
     tabcontent[i].style.display = "none";
  }
  
  // Get all elements with class="tablinks" and remove the class "active"
  tablinks = document.getElementsByClassName("tablinks");
  for (i = 0; i < tablinks.length; i++) {
    tablinks[i].className = tablinks[i].className.replace("active", "");
  }

  // Show the current tab, and add an "active" class to the button that opened the tab, hide pic
  document.getElementById(page).style.display = "grid";
  event.currentTarget.className += " active";
  var pic = document.querySelector(".pic");
  pic.style.display = "none";
}

</script>
</html>
